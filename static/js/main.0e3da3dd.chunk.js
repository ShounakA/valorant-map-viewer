(this["webpackJsonpvalorant-mapviewer"]=this["webpackJsonpvalorant-mapviewer"]||[]).push([[0],{28:function(e,t,a){e.exports=a(36)},33:function(e,t,a){},34:function(e,t,a){e.exports=a.p+"static/media/logo.5d5d9eef.svg"},35:function(e,t,a){},36:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(11),i=a.n(s),c=(a(33),a(4)),l=a(5),o=a(7),u=a(6),d=(a(34),a(35),a(1)),h=function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).myRef=r.a.createRef(),n.state={isBuyPeriod:n.props.isBuyPeriod,currMap:"Bind",width:n.props.width,height:n.props.height,drawing_data:{lines:[]},active_color:""},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.props.setResetCallable({resetPan:this.resetPan}),this.props.setMapCallable({updateMap:this.updateMap}),this.setState({svg:d.c(this.myRef.documentElement)}),this.drawMap(this.props.map)}},{key:"componentDidUpdate",value:function(){var e=d.c("#attack-barrier"),t=d.c("#defense-barrier");this.props.isBuyPeriod?(e.style("display",null),t.style("display",null)):(e.style("display","none"),t.style("display","none"))}},{key:"resetPan",value:function(e){var t=d.c("#Bind");var a=d.f().on("zoom",(function(){t.attr("transform",d.b.transform)}));t.transition().duration(750).call(a.transform,d.g)}},{key:"drawColorPallete",value:function(){var e=this,t=d.c("#ui"),a=t.append("g").attr("transform","translate(#{4+SWATCH_D/2},#{4+SWATCH_D/2})").selectAll("swatch").data(["#333333","#ffffff","#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"]),n=this.myRef;t.append("text").html("&#xf1f8;").attr("class","btn").attr("dy","0.35em").attr("transform","translate(800,50)").on("click",(function(){n.current.setState({drawing_data:{lines:[]}}),e.redraw()}));n=this.myRef,a.enter().append("circle").attr("class","swatch").attr("cx",(function(e,t){return 26*t/2+50})).attr("cy",(function(e,t){return t%2==0?72:50})).attr("r",11),a.each((function(t){t===e.state.active_color&&d.c(e).classed("active",!0)}))}},{key:"redraw",value:function(e){var t=this,a=d.c("#canvas").selectAll(".line").data(this.state.drawing_data.lines);a.enter().append("path").attr.attr("class","line").attr("stroke",(function(e){return e.color})).each((function(e){return e.elem=d.c(t)})),e?e.elem.attr("d",(function(e){return t.render_line(e.points)})):a.attr("d",(function(e){return t.render_line(e.points)})),a.exit().remove()}},{key:"render_line",value:function(){d.d.line().x((function(e){return e[0]})).y((function(e){return e[1]})).interpolate("basis")}},{key:"drawMap",value:function(e){var t=this;d.e("./"+e.file).then((function(a){console.log(t.state),d.c(t.myRef.current).node().append(a.documentElement),d.c("#"+e.name).attr("class","svg-content-responsive").attr("viewBox",["0","0",t.state.width,t.state.height].join(" ")),t.drawCharacterLayer("#"+e.name),t.drawDrawingBoardLayer(),t.setState({currMap:e.name});var n=d.c("#"+e.name).call(d.f().scaleExtent([.55,5]).on("zoom",(function(){n.attr("transform",d.b.transform)})))}))}},{key:"updateMap",value:function(e,t,a){var n=a.current.svg,r=a.current,s=e,i=t;d.e("./"+s).then((function(e){d.c("#"+r.state.currMap).remove(),n.node().append(e.documentElement),d.c("#"+i).attr("class","svg-content-responsive").attr("viewBox",["0","0",r.state.width,r.state.height].join(" ")),r.drawCharacterLayer("#"+i),r.drawDrawingBoardLayer(),r.setState({currMap:i});var t=d.c("#"+i).call(d.f().scaleExtent([.55,5]).on("zoom",(function(){t.attr("transform",d.b.transform)})))}))}},{key:"drawCharacterLayer",value:function(e){d.c(e).append("g").attr("id","Draggables")}},{key:"drawDrawingBoardLayer",value:function(){d.c("svg").append("g").attr("id","ui"),d.c("svg").append("g").attr("id","canvas")}},{key:"render",value:function(){return r.a.createElement("div",{className:"svg-container splitter",ref:this.myRef})}}]),a}(n.Component),p=function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).myRef=r.a.createRef(),n.state={name:n.props.name,cdn:n.props.cdn,team:n.props.team,d3_circle_radius:10,id:n.props.team+n.props.name},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.state.team,this.state.cdn,this.state.name;this.addPlayer()}},{key:"addPlayer",value:function(){var e=this.state.team,t=this.state.cdn,a=this.state.name,n=d.c("#Draggables");n.append("g").attr("id",e+a);var r="#24E8AD";"attack"===e&&(r="#FF5859"),(n=d.c("#"+e+a)).style("cursor","grab"),n.append("circle").attr("cx",50).attr("cy",50).attr("r",this.state.d3_circle_radius).style("fill",r).style("stroke",r).style("stroke-width",5),n.append("polygon").attr("points","40,50 60,50 50,30").style("fill",r),n.append("image").attr("href",t).attr("x",35).attr("y",35).attr("width",30).attr("height",30),this.cursorSetup(n);var s=0,i=0;d.a().subject((function(){d.c(this);return{x:s,y:i}})).on("drag",(function(){var e=d.c(this),t="translate(".concat(d.b.x,", ").concat(d.b.y,")");s=d.b.x,i=d.b.y,e.attr("transform",t)}))(n)}},{key:"cursorSetup",value:function(e){e.on("mousedown",(function(){console.log("down"),d.c(this).style("cursor","grabbing")})),e.on("mousemove",(function(){d.c(this).style("cursor","grab")}))}},{key:"deleteAgent",value:function(){d.c("#"+this.state.id).remove();this.props.onDelete(this.state.name,this.state.team)}},{key:"render",value:function(){return r.a.createElement("div",null,this.state.name," \xa0",r.a.createElement("button",{onClick:this.deleteAgent.bind(this)},"Delete"))}}]),a}(n.Component),m=function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).atkRef=r.a.createRef(),n.defRef=r.a.createRef(),n.state={isBuyChecked:!0,resetCallable:null,mapCallable:null,maps:[{name:"Bind",file:"bind-map.svg"},{name:"Haven",file:"haven-map.svg"},{name:"Split",file:"split-map.svg"}],mapRef:r.a.createRef(),currentTeam:"attack",currentMap:{name:"Bind",file:"bind-map.svg"},players:{attack:[],defense:[]},agents:[{name:"Breach",cdn:"https://blitz-cdn.blitz.gg/blitz/val/agents/breach/breach-cutout2-compressed.png",color:"#9E644B",refs:r.a.createRef()},{name:"Brimstone",cdn:"https://blitz-cdn.blitz.gg/blitz/val/agents/brimstone/brimstone-cutout-compressed.png",color:"#468EB7",refs:r.a.createRef()},{name:"Cypher",cdn:"https://blitz-cdn.blitz.gg/blitz/val/agents/cypher/cypher-cutout-compressed.png",color:"#A9AD96",refs:r.a.createRef()},{name:"Jett",cdn:"https://blitz-cdn.blitz.gg/blitz/val/agents/jett/jett-cutout3-compressed.png",color:"#55D1E0",refs:r.a.createRef()},{name:"Omen",cdn:"https://blitz-cdn.blitz.gg/blitz/val/agents/omen/omen-cutout-compressed.png",color:"#543EFF",refs:r.a.createRef()},{name:"Pheonix",cdn:"https://blitz-cdn.blitz.gg/blitz/val/agents/phoenix/phoenix-cutout-compressed.png",color:"#F0753A",refs:r.a.createRef()},{name:"Raze",cdn:"https://blitz-cdn.blitz.gg/blitz/val/agents/raze/raze-cutout-compressed.png",color:"#F6AD40",refs:r.a.createRef()},{name:"Sage",cdn:"https://blitz-cdn.blitz.gg/blitz/val/agents/sage/sage-cutout-compressed.png",color:"#21CEAF",refs:r.a.createRef()},{name:"Sova",cdn:"https://blitz-cdn.blitz.gg/blitz/val/agents/sova/sova-cutout-compressed.png",color:"#325FFF",refs:r.a.createRef()},{name:"Viper",cdn:"https://blitz-cdn.blitz.gg/blitz/val/agents/viper/viper-cutout-compressed.png",color:"#2AC849",refs:r.a.createRef()}]},n}return Object(l.a)(a,[{key:"handleChange",value:function(e){this.setState({isBuyChecked:e.target.checked})}},{key:"setMapCallable",value:function(e){this.setState({mapCallable:e})}},{key:"setResetCallable",value:function(e){this.setState({resetCallable:e})}},{key:"handlePanReset",value:function(e){this.state.resetCallable.resetPan(e)}},{key:"handleAgent",value:function(e){var t,a=this.state.currentTeam,n=this.state.agents[e],r=this.state.players,s=!1,i=(t=n.name,console.log("Trying to add "+t),r[a].forEach((function(e){e.name===t&&(s=!0)})),s);if(r[a].length<5&&!i){var c={cdn:n.cdn,name:n.name};r[a].push(c),this.setState({players:r})}else console.log("Team full or Agent already on map")}},{key:"handleHoverOn",value:function(e){e.current.width=84,e.current.height=56}},{key:"handleHoverOff",value:function(e){e.current.width=80,e.current.height=52}},{key:"renderAgents",value:function(){var e=this;return this.state.agents.map((function(t,a){return r.a.createElement("div",{key:a,className:"agent-button",style:{background:t.color},onClick:e.handleAgent.bind(e,a)},r.a.createElement("img",{ref:t.refs,width:80,height:52,className:"agent-img",id:"btn"+t.name,src:t.cdn,onPointerEnter:e.handleHoverOn.bind(e,t.refs),onPointerLeave:e.handleHoverOff.bind(e,t.refs)}),r.a.createElement("br",null),r.a.createElement("label",{className:"",to:"btn"+t.name},t.name))}))}},{key:"renderFieldAgents",value:function(){var e=this;return"attack"==this.state.currentTeam?this.state.players.attack.map((function(t,a){return r.a.createElement(p,{name:t.name,cdn:t.cdn,team:"attack",key:t.name,onDelete:e.removeFieldAgent.bind(e)})})):this.state.players.defense.map((function(t,a){return r.a.createElement(p,{name:t.name,cdn:t.cdn,team:"defense",key:t.name,onDelete:e.removeFieldAgent.bind(e)})}))}},{key:"setAttack",value:function(e){this.setState({currentTeam:"attack"}),this.atkRef.current.style={backgroundColor:"#FF5859"},this.defRef.current.style={backgroundColor:null}}},{key:"setDefense",value:function(e){this.setState({currentTeam:"defense"}),this.defRef.current.style={background:"#24E8AD"},this.atkRef.current.style={background:null}}},{key:"renderMapSelection",value:function(){return this.state.maps.map((function(e,t){return r.a.createElement("option",{key:t,value:e.file},e.name)}))}},{key:"onMapChange",value:function(e){var t=e.target.value,a=e.target.value.split("-")[0],n=a.substr(0,1).toUpperCase()+a.substr(1,a.length);this.setState({players:{attack:[],defense:[]}}),this.state.mapCallable.updateMap(t,n,this.state.mapRef)}},{key:"removeFieldAgent",value:function(e,t){var a=this.state.players;console.log("Trying to remove "+e+" from "+t);var n=this.state.players[t].filter((function(t){return t.name!==e}));a[t]=n,this.setState({players:a})}},{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"}),r.a.createElement("div",{className:"splitter"},r.a.createElement("div",{id:"config"},r.a.createElement("select",{onChange:this.onMapChange.bind(this)},this.renderMapSelection()),r.a.createElement("label",{to:"barrier"},"Barrier ON/OFF"),r.a.createElement("input",{id:"barrier",type:"checkbox",onChange:this.handleChange.bind(this),checked:this.state.isBuyChecked}),r.a.createElement("br",null),r.a.createElement("button",{onClick:this.handlePanReset.bind(this)},"Reset"),r.a.createElement("br",null),r.a.createElement("button",{ref:this.atkRef,onClick:this.setAttack.bind(this)},"Attackers"),r.a.createElement("button",{ref:this.defRef,onClick:this.setDefense.bind(this)},"Defenders"),r.a.createElement("div",{className:"agents"},this.renderAgents()),r.a.createElement("div",null,this.renderFieldAgents())),r.a.createElement(h,{ref:this.state.mapRef,width:"908",height:"908",isBuyPeriod:this.state.isBuyChecked,setResetCallable:this.setResetCallable.bind(this),setMapCallable:this.setMapCallable.bind(this),map:this.state.currentMap})))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(m,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[28,1,2]]]);
//# sourceMappingURL=main.0e3da3dd.chunk.js.map